import React, {useEffect} from "react";
import {stringify} from "query-string";

import {getPaginator, limit} from "utils";
import useFech from 'hooks/useFetch'

const getApiUrl = ({username, offset, isFavorites}) => {
    const params = isFavorites
        ? {limit, offset, favorited: username}
        : {limit, offset, author: username}

    return `/articles?${stringify(params)}`
}

const UserArticles = ({username, location, isFavorites}) => {
    const {offset, currentPage} = getPaginator(location.search)
    const apiUrl = getApiUrl({username, offset, isFavorites})
    //console.log('ff', offset, currentPage)
    const [{response, error, isLoading}, doFetch] = useFech(apiUrl)
    console.log('resp', response)

    useEffect(() => {
        doFetch()
    },[doFetch])
    return (
        <div>userArticles</div>
    )
}

export default UserArticles